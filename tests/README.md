# æµ‹è¯•æ–‡æ¡£

## æµ‹è¯•æ¡†æ¶

- **Jest**: æµ‹è¯•è¿è¡Œå™¨å’Œæ–­è¨€åº“
- **ts-jest**: TypeScript æ”¯æŒ
- **supertest**: HTTP æ¥å£æµ‹è¯•

## æµ‹è¯•åˆ†ç±»

### å•å…ƒæµ‹è¯• (Unit Tests)
ä½äº `tests/unit/`ï¼Œæµ‹è¯•å•ä¸ªæ¨¡å—çš„åŠŸèƒ½ï¼š
- `response.test.ts` - å·¥å…·å‡½æ•°æµ‹è¯•
- `account.model.test.ts` - æ•°æ®æ¨¡å‹æµ‹è¯•

### é›†æˆæµ‹è¯• (Integration Tests)
ä½äº `tests/integration/`ï¼Œæµ‹è¯•å¤šä¸ªæ¨¡å—ååŒå·¥ä½œï¼š
- `account.api.test.ts` - API ç«¯ç‚¹æµ‹è¯•

## è¿è¡Œæµ‹è¯•

```bash
# å®‰è£…æµ‹è¯•ä¾èµ–
npm install

# è¿è¡Œæ‰€æœ‰æµ‹è¯•
npm test

# ç›‘å¬æ¨¡å¼ï¼ˆè‡ªåŠ¨é‡æ–°è¿è¡Œï¼‰
npm run test:watch

# ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
npm run test:coverage
```

## æµ‹è¯•è¦†ç›–çš„åŠŸèƒ½

### âœ… å·²è¦†ç›–
1. **å·¥å…·å‡½æ•°**
   - æˆåŠŸ/é”™è¯¯å“åº”æ ¼å¼åŒ–
   - æ–‡ä»¶åç”Ÿæˆ

2. **æ•°æ®æ¨¡å‹**
   - åˆ›å»ºè´¦å·
   - æŸ¥è¯¢è´¦å·ï¼ˆå…¨éƒ¨/å•ä¸ª/æŒ‰å¹³å°ï¼‰
   - æ›´æ–°è´¦å·
   - åˆ é™¤è´¦å·

3. **API ç«¯ç‚¹**
   - GET /api/accounts
   - GET /api/accounts/:id
   - GET /api/accounts/platform/:platform
   - POST /api/accounts/login/start
   - POST /api/accounts/login/cancel

### ğŸš§ å¾…å®Œå–„
1. **Playwright æœåŠ¡æµ‹è¯•** (éœ€è¦ mock)
2. **Cookie éªŒè¯æµ‹è¯•** (éœ€è¦ mock)
3. **å®Œæ•´çš„ç™»å½•æµç¨‹æµ‹è¯•** (éœ€è¦çœŸå®æµè§ˆå™¨æˆ– mock)

## æµ‹è¯•æ•°æ®åº“

æµ‹è¯•ä½¿ç”¨ç‹¬ç«‹çš„æ•°æ®åº“ `data/test.db`ï¼Œæ¯æ¬¡æµ‹è¯•å‰éƒ½ä¼šæ¸…ç©ºæ•°æ®ã€‚

é…ç½®æ–‡ä»¶ï¼š`.env.test`

## æ³¨æ„äº‹é¡¹

1. **æµ‹è¯•éš”ç¦»**: æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹å‰éƒ½ä¼šé‡ç½®æ•°æ®åº“
2. **å¼‚æ­¥æµ‹è¯•**: ä½¿ç”¨ async/await å¤„ç†å¼‚æ­¥æ“ä½œ
3. **è¶…æ—¶è®¾ç½®**: é»˜è®¤è¶…æ—¶ 30 ç§’ï¼ˆå¯åœ¨ `tests/setup.ts` ä¸­è°ƒæ•´ï¼‰
4. **æµè§ˆå™¨æµ‹è¯•**: Playwright ç›¸å…³æµ‹è¯•éœ€è¦çœŸå®æµè§ˆå™¨æˆ– mock

## ç¤ºä¾‹æµ‹è¯•

```typescript
describe('ç¤ºä¾‹æµ‹è¯•', () => {
  it('åº”è¯¥é€šè¿‡', () => {
    expect(1 + 1).toBe(2);
  });

  it('å¼‚æ­¥æµ‹è¯•', async () => {
    const result = await Promise.resolve('æˆåŠŸ');
    expect(result).toBe('æˆåŠŸ');
  });
});
```

## æŒç»­é›†æˆ

TODO: æ·»åŠ  GitHub Actions é…ç½®
